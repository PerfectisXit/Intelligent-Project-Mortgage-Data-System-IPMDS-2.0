# IPMDS v0.2.0 Release Notes

Release date: 2026-02-12

This release focuses on making the Excel import workflow production-usable for real GD ledgers, improving AI reliability/observability, and adding end-to-end data lineage in committed preview.

## Compared with v0.1.0

### 1) AI provider control and observability
- Added persistent provider settings (DB-backed) with runtime routing.
- Added provider probe API and UI button for availability + latency checks.
- Added read-only prompt template endpoint and UI viewer for Copilot and header review prompts.

### 2) Excel import pipeline hardened
- Added staged import UX: Python rules stage + LLM review stage.
- Added streaming logs for header review process with model-attempt trace.
- Added explicit header confirmation before diff/commit.
- Added fallback behavior when LLM times out or fails.

### 3) Real GD ledger field coverage
- New/updated mapping coverage includes:
  - 建设单位（支付工程款的单位）
  - 总包单位
  - 分包（拿走房子的单位）
  - 认购日期/签约日期
  - 是否更名
  - 收款比例
  - 未达款情况说明
  - 联系方式/身份证/地址
  - 现房成交单价

### 4) Import validation rules
- Phone format validation (mobile / landline).
- Receipt ratio deviation check against calculated ratio.
- Date completeness validation (year-only date rejected).
- External rows require construction/general contractor units.

### 5) Committed preview upgrades
- Added project name column.
- Added status basis column (why status is judged as current value).
- Added sorting/filtering for key dimensions (project/status/internal-external and numeric/date columns).
- Added lineage fields: last update source, source file/session, update time.
- Localized transaction/payment labels in Chinese.

### 6) Reliability and operational improvements
- Increased model timeout tolerances.
- Added user-facing "continue waiting or cancel" prompt for long AI parsing.
- Fixed non-UUID dev user IDs causing commit transaction rollback.
- Fixed Chinese filename mojibake in source file display.
- Added/updated dev/prod and backup scripts.

## Notes
- This release supersedes `v0.1.0` as the recommended baseline for real-world ledger import and preview.
